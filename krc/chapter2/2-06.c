/*
setbits (138, 5, 2, 138)

---------------------------------------
    100[01]010  (x)
|   00011000    ((~(~0 << n)) << (p-n))
------------
    10011010
&   00001000    (YYY)
------------
    100[10]010  (OK)

============

    100010[10]  (y)

    11111100    (~0 >> n)
^   11111111    (~0)
------------
    00000011
&   01110101    (~y)
------------
    00000001    (XXX)
    00001000    (YYY)=(XXX)<<(p-n)
---------------------------------------

*/
#include <stdio.h>
#include <stdlib.h>

int  setbits (unsigned x, int p, int n, unsigned y)
{
    /* FIXME */
    return ((x | ((~(~0 << n)) << (p-n))) ^ \
            (((~y) & ((~0 << n)^(~0))) << (p-n))) ;
}
main()
{
    printf ("setbits(138, 5, 2, 138)=%d\n", setbits(138, 5, 2, 138));
}
